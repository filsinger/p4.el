<!--
//    This program is free software; you can redistribute it and/or modify
//    it under the terms of the GNU General Public License as published by
//    the Free Software Foundation; either version 2 of the License, or
//    (at your option) any later version.
//
//    This program is distributed in the hope that it will be useful,
//    but WITHOUT ANY WARRANTY; without even the implied warranty of
//    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
//    GNU General Public License for more details.
//
//    You should have received a copy of the GNU General Public License
//    along with this program; if not, write to the Free Software
//    Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
//
//    If you have any problems to report, or suggestions, please send them
//    to p4el-bugs@lists.sourceforge.net
//
//	$Id: p4.el.html,v 1.9 2003/09/12 17:30:45 rvgnu Exp $
-->
<html>
    <header>
      <title>Perforce/Emacs Integration</title>
    </header>

    <body>
	<h1>Perforce/Emacs Integration</h1>
	<hr>
	<p>
	  This document will help you get up and running using Emacs and
	  Perforce.
	</p>
	<ol>
	  <li><h2>Installing it</h2></li>
	  <p>
	    First things first - add p4.el to your .emacs file
	    <p>
	      <code>
		(load-library "p4")
	      </code>
	    </p>
	    <p>
	      Double check that your .cshrc file defines P4CONFIG,
	      P4USER, and P4PORT.  That's it! You should be all set to
	      use p4.el!
	    </p>
	    <li><h2>Using it</h2></li>
	    <p>
	      Once you have p4.el installed and ready to go you can
	      use emacs' built-in help to review p4.el's functions:
	      C-x p ?  will bring up the list.  C-h f p4-xyz provides
	      defun information for p4-xyz.  Each Perforce command has
	      a corresponding p4.el command.  The vc model is not
	      followed.  Use 'C-x p help commands' for Perforce help.
	    </p>
	    <table BORDER="2">
	      <caption align="top"><em>p4.el Key Mappings</em></caption>
	      <tr>
		<th>Key</th><th>Mapping</th>
		<th>Key</th><th>Mapping</th>
		<th>Key</th><th>Mapping</th>
	      </tr>
	      <tr>
		<td>C-x p a</td><td>p4-<a href=#add>add</a></td>
		<td>C-x p B</td><td>p4-<a href=#branch>branch</a></td>
		<td>C-x p b</td><td>p4-<a href=#report>bug-report</a></td>
	      </tr>
	      <tr>
		<td>C-x p C</td><td>p4-<a href=#changes>changes</a></td>
		<td>C-x p c</td><td>p4-<a href=#client>client</a></td>
		<td>C-x p C-f</td><td>p4-<a href=#find>depot-find-file</a></td>
	      </tr>
	      <tr>
		<td>C-x p ?</td><td>p4-describe-bindings</td>
		<td>C-x p =</td><td>p4-<a href=#diff>diff</a></td>
		<td>C-x p -</td><td>p4-<a href=#ediff>ediff</a></td>
	      </tr>
	      <tr>
		<td></td><td>p4-<a href=#ediff2>ediff2</a></td>
		<td>C-x p X</td><td>p4-<a href=#fix>fix</a></td>
		<td>C-x p x</td><td>p4-<a href=#delete>delete</a></td>
	      </tr>
	      <tr>
		<td>C-x p D</td><td>p4-<a href=#describe>describe</a></td>
		<td>C-x p d</td><td>p4-<a href=#diff2>diff2</a></td>
		<td>C-x p e</td><td>p4-<a href=#edit>edit</a></td>
	      </tr>
	      <tr>
		<td>C-x p v</td><td>p4-<a href=#version>emacs-version</a></td>
		<td>C-x p G</td><td>p4-<a href=#get>get</a></td>
		<td>C-x p g</td><td>p4-<a href=#cname>get-client-name</a></td>
	      </tr>
	      <tr>
		<td>C-x p f</td><td>p4-<a href=#filelog>filelog</a></td>
		<td>C-x p F</td><td>p4-<a href=#files>files</a></td>
		<td>C-x p H</td><td>p4-<a href=#have>have</a></td>
	      </tr>
	      <tr>
		<td>C-x p h</td><td>p4-<a href=#help>help</a></td>
		<td>C-x p J</td><td>p4-<a href=#jobs>jobs</a></td>
		<td>C-x p j</td><td>p4-<a href=#job>job</a></td>
	      </tr>
	      <tr>
		<td>C-x p I</td><td>p4-<a href=#integ>integ</a></td>
		<td>C-x p i	</td><td>p4-<a href=#info>info</a></td>
		<td>C-x p l	</td><td>p4-<a href=#label>label</a></td>
	      </tr>
	      <tr>
		<td>C-x p L	</td><td>p4-<a href=#labels>labels</a></td>
		<td>C-x p C-l</td><td>p4-<a href=#labelsync>labelsync</a></td>
		<td>C-x p n	</td><td>p4-<a href=#notify>notify</a></td>
	      </tr>
	      <tr>
		<td>C-x p o	</td><td>p4-<a href=#opened>opened</a></td>
		<td>C-x p q</td><td>p4-<a href=#pop>pop-window-config</a></td>
		<td>C-x p p</td><td>p4-<a href=#print>print</a></td>
	      </tr>
	      <tr>
		<td>C-x p V</td><td>p4-<a href=#history>print-with-rev-history</a></td>
		<td>C-x p R</td><td>p4-<a href=#refresh>refresh</a></td>
		<td>C-x p m</td><td>p4-<a href=#rename>rename</a></td>
	      </tr>
	      <tr>
		<td>C-x p E</td><td>p4-<a href=#reopen>reopen</a></td>
		<td>C-x p r</td><td>p4-<a href=#revert>revert</a></td>
		<td>C-x p s</td><td>p4-<a href=#cname>set-client-name</a></td>
	      </tr>
	      <tr>
		<td>C-x p P</td><td>p4-<a href=#port>set-p4-port</a></td>
		<td>C-x p S</td><td>p4-<a href=#submit>submit</a></td>
		<td>C-x p t</td><td>p4-<a href=#mode>toggle-vc-mode</a></td>
	      </tr>
	      <tr>
		<td>C-x p u</td><td>p4-<a href=#user>user</a></td>
		<td>C-x p U</td><td>p4-<a href=#users>users</a></td>
		<td>C-x p w</td><td>p4-<a href=#where>where</a></td>
	      </tr>
	    </table>
	    <!-- hr -->
	    <table BORDER="2">
	      <caption ALIGN="top"><em>p4.el Function Help</em></caption>
	      <tr>
		<th>Function</th><th>Help</th>
	      </tr>
	      <tr>
		<td>p4-describe-bindings<br>C-x p ?</td>
		<td>
		  <pre>A function to list the key bindings for the p4 prefix map</pre>
		</td>
		<tr>
		  <td>p4-ediff<br>C-x p -</td>
		  <td>
		    <a name=ediff></a>
		    <pre>Use ediff to compare file with its original client version.</pre>
		  </td>
		</tr>
		<tr>
		  <td>p4-ediff2</td>
		  <td>
		    <a name=ediff2></a>
		    <pre>Use ediff to compare two different depot files.</pre>
		  </td>
		</tr>
		<tr>
		  <td>p4-diff-head<br></td>
		  <td>
		    <a name=diff-head></a>
		    <pre>Use diff-head to compare file (opened or unopened) with the latest revision in the depot.</pre>
		  </td>
		</tr>
		<tr>
		  <td>p4-diff<br>C-x p =</td>
		  <td>
		    <a name=diff></a>
		    <PRE>
To diff the current file and topmost depot version, type C-x p =.

Run diff (on the client) of a client file against the corresponding
revision in the depot.	The file is only compared if the file is
opened for edit or the revision provided with the file argument is
not the same as the revision had by the client.

If no file argument is given, diff all open files.
This can be used to view pending changes.

The -f flag forces a diff for every file, regardless of whether
they are opened or if the client has the named revision.
This can be used to verify the client contents.

The -s flag outputs reduces the output of diff to the names of files
satisfying the following criteria:

	-sa	Opened files that are different than the revision
		in the depot, or missing.

	-sd	Unopened files that are missing on the client.

	-se	Unopened files that are different than the revision
		in the depot.

	-sr	Opened files that are the same as the revision in the
		depot.
		    </PRE>
		  </td>
		</tr>
		<tr>
		  <td>p4-fix<br>C-x p X</td>
		  <td>
		    <a name=fix></a>
		    <PRE>
p4-fix is an interactive Lisp function in `p4'.

To mark jobs as being fixed by a changelist number, type C-x p X.

'p4 fix' marks each named job as being fixed by the changelist
number given with -c.  The changelist may be either pending or,
submitted and the jobs may be still be opened or already closed
 (fixed by another changelist).

If the changelist has already been submitted and the job is still
open then 'p4 fix' marks the job closed.  If the changelist has not
been submitted and the job is still open, the job will be marked
closed when the changelist is submitted.  If the job is already
closed, it is left alone.

The -d flag causes the specified fixes to be deleted.  This does not
otherwise affect the named changelist or jobs.
		    </PRE>
		  </td>
		</tr>
		<tr>
		  <td>p4-delete<br>C-x p x</td>
		  <td>
		    <a name=delete></a>
		    <PRE>
p4-delete is an interactive Lisp function in `p4'.

To delete the current file from the depot, type C-x p x.

Opens a file that currently exists in the depot for deletion.
If the file is present on the client it is removed.  If a pending
change number is given with the -c flag the opened file is associated
with that change, otherwise it is associated with the 'default'
pending change.

If file is already open it is reopened for delete and moved into
the specified pending change (or 'default' change if no change
number is given.)

Files that are deleted generally do not appear on the have list.
		    </PRE>
		  </td>
		</tr>
		<tr>
		  <td>p4-where<br>C-x p w</td>
		  <td>
		    <a name=where></a>
		    <PRE>
To show how local file names map into depot names, type C-x p w.

Optional args [file ...] are passed as prefix arguments.

Where shows how the named files map through the client map
into the depot.	 If no file is given, the mapping for '...'
(all files in the current directory and below) is shown.
		    </PRE>
		  </td>
		</tr>
		<tr>
		  <td>p4-print-with-rev-history<br>C-x p V</td>
		  <td>
		    <a name=history></a>
		    <PRE>
To Print a depot file with revision history to a buffer,
type C-x p V
		    </PRE>
		  </td>
		</tr>
		<tr>
		  <td>p4-emacs-version<br>C-x p v</td>
		  <td>
		    <a name=version></a>
		    <pre>Return the current Emacs-P4 Integration version.</pre>
		  </td>
		</tr>
		<tr>
		  <td>p4-users<br>C-x p U</td>
		  <td>
		    <a name=users></a>
		    <PRE>
To display list of known users, type C-x p U.

Optional args [user ...] are passed as prefix arguments.

Reports the list of all users, or those users matching the argument,
currently known to the system.	The report includes the last time
each user accessed the system.
		    </PRE>
		  </td>
		</tr>
		<tr>
		  <td>p4-user<br>C-x p u</td>
		  <td>
		    <a name=user></a>
		    <PRE>
To create or edit a user specification, type C-x p u.

Create a new user specification or edit an existing user
specification. The specification form is put into a temporary
file and the editor (given by the environment variable $EDITOR)
is invoked.

Normally, a user specification is created automatically the
first time the user invokes any client command that can update
the depot.  The 'user' command is generally used to edit the
user's reviewing subscription list for change review.

The user specification form contains the following fields:

User:	     The user name (read only).

Email:	     The user's email address (user@client default).

Update:	     The date the specification was last modified (read only).

Access:	     The date the user last issued a client command.

FullName:    The user's real name.

Reviews:     The subscription list for change review.  You may
	     use wildcards:
		 ...		matches any characters including

		 *		matches any character except /
	     There may be any number of review lines.

The -d flag deletes the named user, but only if the user is not
the owner of any branches, clients, jobs, labels, or opened files.

The -o flag causes the named user specification to be written
to the standard output.	 The user's editor is not invoked.

The -i flag causes a user specification to be read from the
standard input.	 The user's editor is not invoked.
		    </PRE>
		  </td>
		</tr>
		<tr>
		  <td>p4-toggle-vc-mode<br>C-x p t</td>
		  <td>
		    <a name=mode></a>
		    <PRE>
In case, the P4 server is not available, or when working off-line, toggle
the VC check on/off when opening files.
		    </PRE>
		  </td>
		</tr>
		<tr>
		  <td>p4-submit<br>C-x p S</td>
		  <td>
		    <a name=submit></a>
		    <PRE>
To submit a pending change to the depot, type C-x p S.

Submit commits a pending change with its associated files to the depot.
With no argument submit sends the 'default' change.  With the -c flag
the designated pending change is sent.	Before committing the change
submit locks all associated files not already locked.  If any file
cannot be locked the change is aborted.	 If submit is sending the
default change it first provides the user with a dialog similar to
'p4 change' so the user can compose a change description.  In this
dialog the user is presented with the list of open files in change
'default'.  Files may be deleted from this list but they cannot be
added.	(Use an open command (open, edit, add, delete) to add
additional files to a change or to move files between changes.)

If the submit fails for any reason the files are left open in
a newly created pending change.

Submit is guaranteed to be atomic.  Either all files will be
updated in the depot as a unit or none will be.

The -i flag causes a change specification to be read from the
standard input.	 The user's editor is not invoked.
		    </PRE>
		  </td>
		</tr>
		<tr>
		  <td>p4-set-client<br>C-x p s</td>
		  <td>
		    <a name=setclient></a>
		    <PRE>
To set the current value of P4CLIENT, type C-x p s.

This will change the current client from the previous client to the new
given value.

Setting this value to nil would disable P4 Version Checking.

`p4-set-client-name' will complete any client names set using the function
`p4-set-my-clients'. The strictness of completion will depend on the
variable `p4-strict-complete' (default is t).

Argument P4-NEW-CLIENT-NAME The new client to set to. The default value is
the current client.
		    </PRE>
		  </td>
		</tr>
		<tr>
		  <td>p4-refresh<br>C-x p R</td>
		  <td>
		    <a name=refresh></a>
		    <PRE>
Refresh the contents of an unopened file. C-x p R.

Optional args [file ...] are passed as prefix arguments.

Refresh replaces the files with their contents from the depot.	Refresh only
refreshes unopened files; opened files must be reverted.  This command
requires naming files explicitly.
		    </PRE>
		  </td>
		</tr>
		<tr>
		  <td>p4-revert<br>C-x p r</td>
		  <td>
		    <a name=revert></a>
		    <PRE>
Revert all change in the current file.

Argument SHOW-OUTPUT  displays the *P4 Output* buffer on executing the
command if t.
		    </PRE>
		  </td>
		</tr>
		<tr>
		  <td>p4-pop-window-config<br>C-x p q</td>
		  <td>
		    <a name=pop></a>
		    <PRE>
Pop `num' elements from the `p4-window-config-stack' stack and use
the last popped element to restore the window configuration.
		    </PRE>
		  </td>
		</tr>
		<tr>
		    <a name=port></a>
		  <td>p4-set-p4-port<br>C-x p P</td>
		  <td>
		    <PRE>
To set the current value of P4PORT, type C-x p P.

This will change the current server from the previous server to the new
given value.

Argument P4-NEW-P4-PORT The new server:port to set to. The default value is
the current value of P4PORT.
		    </PRE>
		  </td>
		</tr>
		<tr>
		  <td>p4-print<br>C-x p p</td>
		  <td>
		    <a name=print></a>
		    <PRE>
To print a depot file to a buffer, type C-x p p.

Retrieve the contents of a depot file to the client's standard
output.	 The client's gotten list is not affected.  If file is
specified as a client file name, the client view is used to
find the corresponding depot file.  The -q flag suppresses the
initial line that displays the file name and revision.
		    </PRE>
		  </td>
		</tr>
		<tr>
		  <td>p4-opened<br>C-x p o</td>
		  <td>
		    <a name=opened></a>
		    <PRE>
To display list of files opened for pending change, type C-x p o.

Optional args [-a] [file ...] are passed as prefix arguments.

Shows files currently opened for pending changes or indicates for the
specified individual files whether they are currently opened.
If no file names are given, all files open on the current client
are listed.  The -a flag lists opened files in all clients.
		    </PRE>
		  </td>
		</tr>
		<tr>
		  <td>p4-notify<br>C-x p n</td>
		  <td>
		    <a name=notify></a>
		    <PRE>
To notify a list of users of a change submission manually, type
C-x p n.

To do auto-notification, set the notification list with `p4-set-notify-list'
and on each submission, the users in the list will be notified of the
change.

Since this uses the sendmail program, it is mandatory to set the correct
path to the sendmail program in the variable `p4-sendmail-program'.

Also, it is mandatory to set the user's email address in the variable
`p4-user-email'.

Argument USERS The users to notify to. The default value is the notification
list.
		    </PRE>
		  </td>
		</tr>
		<tr>
		  <td>p4-rename<br>C-x p m</td>
		  <td>
		    <a name=rename></a>
		    <PRE>
To rename a file in the depot, type C-x p m.

Perforce does not support a single 'rename' command, but files can
be renamed by branching one file into another and then deleting the
original file.

The 'from' and 'to' file arguments may include wildcards as long as
they are matched.

Integrating from files require read access to the files, but deleting
them requires write access.

For further information, see the help for the individual commands.
		    </PRE>
		  </td>
		</tr>
		<tr>
		  <td>p4-labelsync<br>C-x p C-l</td>
		  <td>
		    <a name=labelsync></a>
		    <pre>
		      To synchronize a label with the current client contents, type C-x p C-l.
		    </pre>
		  </td>
		</tr>
		<tr>
		  <td>p4-labels<br>C-x p L</td>
		  <td>
		    <a name=labels></a>
		    <PRE>
To display list of defined labels, type C-x p L.

Reports the list of all labels currently known to the system.
Labels takes no arguments.
		    </PRE>
		  </td>
		</tr>
		<tr>
		  <td>p4-label<br>C-x p l</td>
		  <td>
		    <a name=label></a>
		    <pre>Edit a P4-label specification using C-x p l.</pre>
		  </td>
		</tr>
		<tr>
		  <td>p4-jobs<br>C-x p J</td>
		  <td>
		    <a name=jobs></a>
		    <PRE>
To display list of jobs, type C-x p J.

Optional args [ -e jobview -i -l -m max ] [ file[revRange] ... ] are passed
as prefix arguments.

Reports the list of all jobs currently known to the system.  If a
file (pattern) is given, only fixes for changelists affecting that
file (or set of files) are listed.  The file pattern may include
wildcards and/or a revision number range.  See 'p4 help revisions'
for help specifying revisions.

The -e jobview limits the output to jobs satisfying the expression
given as 'jobview'.  See 'p4 help jobview' for a description of
jobview syntax.

The -i flag also includes any fixes made by changelists integrated
into the specified files.

The -l flag produces long output with the full text of the job
descriptions.

The -m max flag limits the output to the first 'max' jobs,
ordered by their job name.
		    </PRE>
		  </td>
		</tr>
		<tr>
		  <td>p4-job<br>C-x p j</td>
		  <td>
		    <a name=job></a>
		    <PRE>
To create or edit a job, type C-x p j.

'p4 job' creates and edits job specifications using an ASCII form.
A job is a defect, enhancement, or other unit of intended work.
The 'p4 fix' command can associate changelists with jobs.

With no arguments, 'p4 job' creates a blank job specification form
and invokes the user's editor.  When the form is saved, a job name
of the form jobNNNNNN is created.  If a jobName is given on the
command line either that named job will be created or, if the job
already exists, the job can be modified.

As jobs are entered or updated, all fields are indexed for
searching by 'p4 jobs'.  Text fields are broken into individual
alphanumeric words (punctuation and whitespace are ignored) and
each word is entered, case folded, into the word index.  Date
fields are converted to an internal representation (seconds
since 1970/01/01 00:00:00) and entered into the date index.

The fields of a job are defined by the 'p4 jobspec' command.
There is a simple default jobspec that is used if no explicit
one has been defined.

The -d flag deletes the named job and any associated fixes.

The -o flag causes the named job specification to be written
to the standard output.  The user's editor is not invoked.

The -i flag causes a job specification to be read from the
standard input.  The user's editor is not invoked.

The -f flag allows otherwise read-only fields to be set.
		    </PRE>
		  </td>
		</tr>
		<tr>
		  <td>p4-integ<br>C-x p I</td>
		  <td>
		    <a name=integ></a>
		    <PRE>
To schedule integrations between branches, type C-x p I.

Optional args [-n -r] [-c change#] [file ...] are passed as prefix
arguments.

Integ determines what integrations are necessary between related files,
according to the branch named and its view.  These integrations, represented
by a list of revisions of branch source files which need to be merged into
the related branch target file, are scheduled for later action.	 The actual
merge and any necessary conflict resolution is performed using the resolve
command.  The -n flag displays what integrations would be necessary but does
not schedule them.  A branch name is required.

If the -r flag is present, the mappings in the branch view are reversed,
with the target files and source files exchanging place.

If no file names are given then the entire branch view is examined for
needed integrations.  Files that are not mapped in the client's view are
ignored.  Files scheduled for integration are opened for the appropriate
action in the default change.  If -c change# is given the files are opened
in the numbered pending change.

Argument BRANCH is the branch to integrate into.
		    </PRE>
		  </td>
		</tr>
		<tr>
		  <td>p4-info<br>C-x p i</td>
		  <td>
		    <a name=info></a>
		    <PRE>
To print out client/server information, type C-x p i.

Info dumps out what the server knows about the client (the user
name, the client name, and the client directory) and some server
		    </PRE>
		  </td>
		</tr>
		<tr>
		  <td>p4-have<br>C-x p H</td>
		  <td>
		    <a name=have></a>
		    <PRE>
To list revisions last gotten, type C-x p H.

Optional args [file ...] are passed as prefix arguments.

List revisions of named files that were last gotten from the depot.  If no
file name is given list all files gotten on this client.
		    </PRE>
		  </td>
		</tr>
		<tr>
		  <td>p4-help<br>C-x p h</td>
		  <td>
		    <a name=help></a>
		    <PRE>
To print help message , type C-x p h.

Print a help message about command.  If no command name is given print a
general help message about Perforce and give a list of available client
commands.

Argument ARG command for which help is needed.
		    </PRE>
		  </td>
		</tr>
		<tr>
		  <td>p4-get<br>C-x p G</td>
		  <td>
		    <a name=get></a>
		    <PRE>
To synchronise the local view with the depot, type C-x p G.

Optional args [-n] [file ...] can be passed as prefix arguments.

Synchronize a client with its view for the files named, or for the entire
client if no files named.  Get handles the case where files have been
updated in the depot and need to be brought up-to-date on the client as well
as the case when the view itself has changed.

Depot files in the clients view not currently gotten on the client will be
added.	Client files that were gotten from the depot but that are no longer
in the clients view (or have been deleted in the depot) will be deleted from
the client. Client files that are still in the client view but which have
been updated in the depot are replaced by the needed revision from the
depot.

If file gives a revision specifier, then retrieve the revision so indicated.

The client view is used to map client file names to depot file names and
vice versa.

If -n is given show what revisions would need to be gotten to synchronize
the client with the view, but do not actually get the files.  If no files
are named show the result for the entire client view.
		    </PRE>
		  </td>
		</tr>
		<tr>
		  <td>p4-get-client-name<br>C-x p g</td>
		  <td>
		    <a name=cname></a>
		    <PRE>
To get the current value of the environment variable P4CLIENT,
type C-x p g.

This will be the current client that is in use for access through
Emacs P4.
		    </PRE>
		  </td>
		</tr>
		<tr>
		  <td>p4-files<br>C-x p F</td>
		  <td>
		    <a name=files></a>
		    <PRE>
List files in the depot. Type, C-x p F.

Optional args [file ...] are passed as prefix arguments.

List files named or matching wild card specification.  Display shows depot
file name, revision, file type, change action and change number of the
current head revision.	If client file names are given as arguments the view
mapping is used to list the corresponding depot files.
		    </PRE>
		  </td>
		</tr>
		<tr>
		  <td>p4-filelog<br>C-x p f</td>
		  <td>
		    <a name=filelog></a>
		    <PRE>
To view a history of the change made to the current file, type
C-x p f.

List the revision history of the files named, working backwards
from the latest revision to the most recent revision 'added'.
If file is given as a client file, the depot file last gotten is
listed.	 The -l flag produces long output with the full text of the
change descriptions.
		    </PRE>
		  </td>
		</tr>
		<tr>
		  <td>p4-depot-find-file<br>C-x p C-f</td>
		  <td>
		    <a name=find></a>
		    <pre>
Typically perforce files are on the file system in a client view, but it
is easy to find a perforce file by perforce paths like
//depot/some/path/to/file using this command, since it autocomplete the
server paths.
		    </pre>
		  </td>
		</tr>
		<tr>
		  <td>p4-reopen<br>C-x p E</td>
		  <td>
		    <a name=reopen></a>
		    <PRE>
To change the type or changelist number of an opened file, type
C-x p E.

Reopen takes an already opened file and moves it to a new changelist
or changes its type (text, ltext, xtext, binary, xbinary, ktext,
kxtext, symlink, or resource).

Argument SHOW-OUTPUT  displays the *P4 Output* buffer on executing the
command if t.
		    </PRE>
		  </td>
		</tr>
		<tr>
		  <td>p4-edit<br>C-x p e</td>
		  <td>
		    <a name=edit></a>
		    <PRE>
To open the current depot file for edit, type C-x p e.

Open an existing file for edit.  The server notes that the current
user on the current client has the file opened, and then changes
the file permission from read-only to read/write.

If -c changelist# is given, the file is put into the pending
changelist; the changelist must have been previously created by
'p4 change'.  Otherwise the file is opened in the 'default'
(unnumbered) changelist.

If -t type is given the file is explicitly opened as the specified
file type.  See 'p4 help filetypes' for a complete list.  If no type
is specified, the type of the previous revision is reused.

Argument SHOW-OUTPUT  displays the *P4 Output* buffer on executing the
command if t.
		    </PRE>
		  </td>
		</tr>
		<tr>
		  <td>p4-describe<br>C-x p D</td>
		  <td>
		    <a name=describe></a>
		    <PRE>
To get a description for a change number, type C-x p D.

Display a changelist description, including the changelist number,
user, client, date of submission, textual description, list
of affected files and diffs of files updated.  Pending changelists
are flagged as 'pending' and the list of affected files and
file diffs is not displayed.

The -d&lt;flag&gt; passes a flag to the built-in diff routine to
modify the output: -dn (RCS), -dc (context), -du (unified).

The -s flag requests a shortened form of describe that doesn't
include the diffs of files updated.
		    </PRE>
		  </td>
		</tr>
		<tr>
		  <td>p4-diff2<br>C-x p d</td>
		  <td>
		    <a name=diff2></a>
		    <PRE>
Display diff of two depot files.

When visiting a depot file, type C-x p d and
enter the versions.

Example:  (find-file "/us/rv/tag/main/Construct")
	  C-x p d <RET>
	  First Version to diff: 113
	  Second Version to diff: 100

	  Will produce the diff between the two versions in the
	  output buffer *P4 Output*

Run diff (on the server) of two files in the depot.  Both files
may optionally include a revision specification; the default is
to compare the head revision.  Wildcards may be used, but they
must match between file1 and file2 and they must be escaped from
the user's shell by quoting or with backslashes ().

The -d flag allows you to pass flags to the underlying diff
program.

-dc passes the -c (context diff) flag.

-du passes the -u (unified diff) flag.

-dn passes the the -n (rcs diff) flag.

Other diff flags are not supported.

Argument VERSION1 First Version to use.
Argument VERSION2 Second Version to use.
		    </PRE>
		  </td>
		</tr>
		<tr>
		  <td>p4-changes<br>C-x p C</td>
		  <td>
		    <a name=changes></a>
		    <PRE>
To list changes, type C-x p C.

Optional args [file ...] are passed as prefix arguments.

List pending and submitted changes of named files.  If no file name is
given list all changes affecting the current directory and below.
		    </PRE>
		  </td>
		</tr>
		<tr>
		  <td>p4-client<br>C-x p c</td>
		  <td>
		    <a name=client></a>
		    <PRE>
To edit a client specification , type C-x p c.

With no argument client creates a new client view specification or
edits an existing client specification. The client name is taken
from the environment variable $P4CLIENT if set, or else from
the current host name.	The specification form is put into a
temporary file and the editor (given by the environment variable
$EDITOR) is invoked.  If a name is given, the specification of
the named client is displayed read-only.

The specification form contains the following fields:

Client:	     The client name (read only.)

Date:	     The date specification was last modified (read only.)

Description: A short description of the client (optional).

Root:	     The root directory of the client file workspace
	     (given in local file system syntax), under which all
	     client files will be placed.  If you change this, you
	     must physically relocate any files as well.

View:	     What files you want to see from the depot and how
	     they map to locations on the client.  The left hand
	     side specifies a depot path, which must begin with
	     //depot/.	The right hand side gives the corresponding
	     client path, given in canonical Perforce file syntax.
	     On expansion to an actual local client file name the
	     initial //client/ is replaced by the Root value, given
	     above.  You may use wildcards:

		 ...		matches any characters including
		 *		matches any character except /
		 %1 to %9	like *, used to associate wild cards

	     Wildcarding must be congruent in both the client and
	     depot paths.  You may have any number of view entries.
	     A new view takes effect on the next 'get'.

Normally, new clients are created with a default view that maps
all depot files onto the client.  The -t flag uses the view from
the named template client as a default instead.

The -d flag causes the named client to be deleted.

The -o flag causes the named client specification to be written
to the standard output.	 The user's editor is not invoked.

The -i flag causes a client specification to be read from the
standard input.	 The user's editor is not invoked.
		    </PRE>
		  </td>
		</tr>
		<tr>
		  <td>p4-branch<br>C-x p B</td>
		  <td>
		    <a name=branch></a>
		    <pre>Edit a P4-BRANCH specification using C-x p B.</pre>
		  </td>
		</tr>
		<tr>
		  <td>p4-bug-report<br>C-x p b</td>
		  <td>
		    <a name=report></a>
		    <pre>
To report a bug in the p4.el program.
		    </pre>
		  </td>
		</tr>
		<tr>
		  <td>p4-add<br>C-x p a</td>
		  <td>
		    <a name=add></a>
		    <PRE>
To add the current file to the depot, type C-x p a.

Optional arguments like '-tktext' can be passed as prefix arguments.

Open a new file for adding to the depot.  If the file exists
on the client it is read to determine if it is text or binary.
If it does not exist it is assumed to be text.	The file must
either not exist in the depot, or it must be deleted at the
current head revision.	Files may be deleted and re-added arbitrarily.

If the -c flag is given the open files are associated with the
specified pending change number; otherwise the open files are
associated with the current 'default' change.

If file is already open it is moved into the specified pending
change.	 It is not permissible to reopen a file for add unless
it was already open for add.

If -t type is given the file is explicitly opened as the specified
file type, which may be text, ltext, xtext, binary, xbinary, ktext
kxtext, symlink, or resource.  Not all types are supported on all
operating systems.  See the Users' Guide for a description of file
types.	If no type is specified, the type is determined automatically
by examination of the file's contents and execution permission bits.
		    </PRE>
		  </td>
		</tr>
	    </table>

	    <p>
	      Most p4.el commands display information in a specialized
	      buffer.  These buffers have special key mappings
	      designed to help browsing the information and to run
	      related p4.el commands.  The keys defined by the "basic"
	      key map are active in all p4.el buffers unless
	      overridden by more specialized key maps. Many of the
	      navigation key bindings are inspired by vi and less.
	    </p>

	    <table BORDER="2">
	      <caption align="top"><em>p4.el Basic Key Map</em></caption>
	      <tr>
		<th>Key</th><th>Mapping</th>
	      </tr>
	      <tr>
	        <td>q</td><td>Quit current buffer.</td>
	      </tr>
	      <tr>
	        <td>k</td><td>Scroll down one line.</td>
	      </tr>
	      <tr>
	        <td>j</td><td>Scroll up one line.</td>
	      </tr>
	      <tr>
	        <td>b<br>[backspace]</td><td>Scroll down one window.</td>
	      </tr>
	      <tr>
	        <td>space</td><td>Scroll up one window.</td>
	      </tr>
	      <tr>
	        <td>&lt</td><td>Move to the beginning of the buffer.</td>
	      </tr>
	      <tr>
	        <td>&gt</td><td>Move to the end of the buffer.</td>
	      </tr>
	      <tr>
	        <td>=</td><td>Delete other windows, making the current
		buffer as large as possible.</td>
	      </tr>
	      <tr>
	        <td>[button2]<br>[return]</td>
		<td>
		  Activate the item at the cursor location.  Different
	          things happen depending on what is under the
	          cursor.  Clicking on a change number invokes
	          p4-describe.  Clicking on a file revision number
	          invokes p4-print for that file revision.  Clicking
	          somewhere in a unified diff jumps to the
	          corresponding file and location.
		</td>
	      </tr>
	      <tr>
	        <td>[button3]</td>
		<td>
		  Invoke p4-<a href=#diff>diff</a> or p4-<a
	          href=#diff2>diff2</a> on the item under the
	          cursor.  Clicking on a depot file name invokes
	          p4-diff on the corresponding file.  Clicking on a
	          file revision number in a filelog listing diffs that
	          file revision against the head revision of the same
	          file.
		</td>
	      </tr>
	    </table>

	    <p>
	      The "filelog" key map is used for 
	      p4-<a href=#filelog>filelog</a> and
	      p4-<a href=#changes>changes</a> buffers.  This key map
	      overrides many of the keys defined in the basic key
	      map.  The intent is to make it easy to browse a set of
	      change descriptions related to a filelog or a changes
	      buffer.
	    </p>

	    <table BORDER="2">
	      <caption align="top"><em>p4.el Filelog Key Map</em></caption>
	      <tr>
		<th>Key</th><th>Mapping</th>
	      </tr>
	      <tr>
	        <td>d</td><td>Invoke p4-<a href=#diff2>diff2</a>.</td>
	      </tr>
	      <tr>
	        <td>f</td><td>Open the corresponding file in another
	        window.  This key has no effect in p4-<a
	        href=#changes>changes</a> buffers.</td>
	      </tr>
	      <tr>
	        <td>s</td><td>Switch to short format, ie hide the
	        change description texts.</td>
	      </tr>
	      <tr>
	        <td>l</td><td>Switch to long format, ie show the
	        change description texts.</td>
	      </tr>
	      <tr>
	        <td>k</td><td>Scroll other window down one line.</td>
	      </tr>
	      <tr>
	        <td>j</td><td>Scroll other window up one line.</td>
	      </tr>
	      <tr>
	        <td>b<br>[backspace]</td><td>Scroll other window down
	        one window.</td>
	      </tr>
	      <tr>
	        <td>[space]</td><td>Scroll other window up one
	        window.</td>
	      </tr>
	      <tr>
	        <td>&lt</td><td>Move to the beginning of the buffer in
	        the other window.</td>
	      </tr>
	      <tr>
	        <td>&gt</td><td>Move to the end of the buffer in the
	        other window.</td>
	      </tr>
	      <tr>
	        <td>n</td><td>Move cursor to next change.</td>
	      </tr>
	      <tr>
	        <td>p<br>N</td><td>Move cursor to previous change.</td>
	      </tr>
	    </table>

	    <p>
	      The "opened" key map is used for buffers displaying a
	      list of depot file names, such as 
	      p4-<a href=#opened>opened</a> and
	      p4-<a href=#files>files</a>.
	    </p>
	    <table BORDER="2">
	      <caption align="top"><em>p4.el Opened Key Map</em></caption>
	      <tr>
		<th>Key</th><th>Mapping</th>
	      </tr>
	      <tr>
	        <td>n</td><td>Move to the next file name.</td>
	      </tr>
	      <tr>
	        <td>p<br>N</td><td>Move to the previous file name.</td>
	      </tr>
	    </table>

	    <p>
	      The "diff" key map is used for buffers that display diff
	      output, such as p4-<a href=#diff>diff</a> and
	      p4-<a href=#describe>describe</a>.
	    </p>
	    <table BORDER="2">
	      <caption align="top"><em>p4.el Diff Key Map</em></caption>
	      <tr>
		<th>Key</th><th>Mapping</th>
	      </tr>
	      <tr>
	        <td>n</td><td>Move to next file diff.</td>
	      </tr>
	      <tr>
	        <td>p<br>N</td><td>Move to previous file diff.</td>
	      </tr>
	      <tr>
	        <td>d</td><td>Move to next diff hunk.</td>
	      </tr>
	      <tr>
	        <td>u</td><td>Move to previous diff hunk.</td>
	      </tr>
	    </table>

	    <p>
	      The "blame" key map is used for the
	      p4-print-with-rev-history buffer.
	    </p>
	    <table BORDER="2">
	      <caption align="top"><em>p4.el Blame Key Map</em></caption>
	      <tr>
		<th>Key</th><th>Mapping</th>
	      </tr>
	      <tr>
	        <td>n</td><td>Move to next "interesting" line.</td>
	      </tr>
	      <tr>
	        <td>p<br>N</td><td>Move to previous "interesting" line.</td>
	      </tr>
	      <tr>
	        <td>l</td><td>Toggle line wrap mode on/off.</td>
	      </tr>
	    </table>

	    <li><h2>Hacking it</h2></li>
	    <p>
	      To hack p4.el, copy it from
	      <code>/your/path/to/emacs/lisp</code> or visit
	      the <a href="http://p4el.sourceforge.net/">p4.el home
		page</a>.
	    </p>

	    <li><h2>Updates/Misc.</h2></li>

	    <p>New release announcements and discussion of this
	    program take place on the Lisp/Emacs mailing list; to
	    join, send email to <a href=mailto:emacs-lisp-discuss-request@yahoogroups.com>emacs-lisp-discuss-request@yahoogroups.com</a>
	    with an email body of "subscribe".
	    <li><h2>Thanks</h2></li>
	    <p> The perforce-emacs integration team would like to
	    thanks Chris Patti for documenting p4.el usage in this nice
	    document!
	</ol>
	<hr>
	<A href="http://sourceforge.net"> <IMG
	src="http://sourceforge.net/sflogo.php?group_id=58201&amp;type=5"
	width="210" height="62" border="0" alt="SourceForge Logo"></A>
	<hr>
	Last Updated: $Revision: 1.9 $ on $Date: 2003/09/12 17:30:45 $
    </body>
  </html>
